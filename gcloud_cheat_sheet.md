* [format](https://cloudplatform.googleblog.com/2016/06/filtering-and-formatting-fun-with.html)
* [projects](https://cloud.google.com/sdk/gcloud/reference/topic/projections)
* [filters](https://cloud.google.com/sdk/gcloud/reference/topic/filters)

## auth
```
#kubectl uses OAuth token generated by 
gcloud config config-helper --format json
OR
gcloud config config-helper --format='value(credential.access_token)'
OR
gcloud auth print-access-token 
```

```
gcloud init
gcloud auth list
gcloud auth login
gcloud info

```
## switch gcloud context with gcloud config
```
gcloud config list
gcloud config set compute/zone us-west1-a
gcloud config set account "account_email"
alias demo='gcloud config set account pythonrocksk8s201702@gmail.com && gcloud config set project salt-163215 && gcloud config set compute/region us-west1 && gcloud config set compute/zone us-west1-a'

```
### project zone cluster
```
project_id=$(gcloud config get-value project)
project_id=$(gcloud config list project --format='value(core.project)')

cluster=$(gcloud config get-value container/cluster 2> /dev/null)
zone=$(gcloud config get-value compute/zone 2> /dev/null)
project=$(gcloud config get-value core/project 2> /dev/null)

```

## find an instance 
```
gcloud compute instances list --project=dev --filter="name~^es"
gcloud compute instances list --project=dev --filter=name:kafka --format="value(name,INTERNAL_IP)"
```
# generate ssh config 
```
gcloud compute config-ssh
```
# billing
```
gcloud alpha billing accounts projects link <project_id> --account-id <account_id>
```

## address
```
gcloud compute addresses describe https-lb --global --format json
```

## find the forwrading-rules given the dns
```
gcloud compute forwarding-rules list --filter=$(dig +short <dns_name>)
```

## describe a regional forwarding rule
```
gcloud compute forwarding-rules describe my-forwardingrule --region us-central1
```

## describe a global forwarding rule
```
gcloud compute forwarding-rules describe my-http-forwardingrule --global
```

## debugging
```
gcloud  compute instances list --log-http
```

## metadata
```
curl "http://metadata.google.internal/computeMetadata/v1/instance/?recursive=true&alt=text" -H "Metadata-Flavor: Google"
```

## set up application-default
https://developers.google.com/identity/protocols/application-default-credentials set up gcloud auth application-default login

https://cloud.google.com/sdk/docs/release-notes#15000_2017-04-05

gcloud container clusters create|get-credentials will now configure kubectl to use the credentials of the active gcloud account by default, instead of using application default credentials. This requires kubectl 1.6.0 or higher. You can update kubectl by running 
gcloud components update kubectl. If you prefer to use application default credentials to authenticate kubectl to Google Container Engine clusters, you can revert to the previous behavior by setting the container/use_application_default_credentials property:
gcloud config set container/use_application_default_credentials true
```
export CLOUDSDK_CONTAINER_USE_APPLICATION_DEFAULT_CREDENTIALS=true
export GOOGLE_APPLICATION_CREDENTIALS=$HOME/.config/salt-87381ff.json
```